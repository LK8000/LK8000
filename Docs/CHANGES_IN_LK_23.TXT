======================
Changes in LK8000 v2.3
======================

Version 2.3b

NEW


CHANGES

. Orbiter enabled only after 100m thermal gain achieved. Below this gain, we assume the thermal center is not valid.
  Remember that orbiter will autodisable after 500m thermal gain. Thus it is working in the 100-500m th.gain range.
. 2.4 nearest airspace page contains airspaces in maximum 100km range
. Airspace nearest vertical distance infobox shows vertical distance to an airspace directly above or below at current position (or to leave a fly zone)
. Airspace nearest horizontal distance infobox shows horizontal distance to an airspace at the current altitude (or to leave a fly zone)



FIXES

. Fix a bug in 2.3a causing again sometimes the "White Screen of Pain" problem on startup.
. Fix Airspace parser, coordinate parsing fails if coords given in DD:MM:SS<spc><spc>X format






---------------
Version 2.3a 110603

NEW

. New configuration for Polars (requires reconfiguring polar type!)
. Many new polars

. New FLAPS setting calculator , for extended polars 

. New IMI ERIXX logger support, also for task declaration

. New configurable BottomBar.
    System config menu 10 let you configure individually each bottombar stripe.
    While rotating, only desired stripes will be shown.
    Even if all bars are set off, NAV1 is shown.
    Thermal mode will keep showing THR 0 bar.

. New configurable Infopages.
    System config menu 10 let you configure individually each infopage, except traffic.
    If all pages of a branch (for example, all 2.x pages) are OFF, then that branch will not be selected
    during rotation.
    Direct access to pages through custom keys is always possible, bypassing this configuration.
    Traffic pages 4.x - when Flarm is detected - are always available. If you don't want traffic informations, 
    then please disable these traffic data being sent by flarm in its protocol, and save CPU.

. New Color scheme for GA: relative terrain.
    This scheme will show red any terrain above current altitude.
    Anything below, up to 500ft below, will be graded to yellow.
    This scheme is NOT good for gliders, because it does not consider the loss of altitude while gliding.
    It is intended to be used by general aviation mode, optionally activated by a button.

. New Info Status System indicators for :
	Simulator mode
	GPS device in use for fix
	Software version

. New infobox Home Arrival altitude

. ------- New AIRSPACE handling ENGINE ----------

  . NEW 2.4 nearest airspace page

  . New airspace storage classes (CAirspace, CAirspaceCicrle, CAirspaceArea)
  . New CAirspaceManager singleton class for managing airspace operations
  . New openair parser based on the old one
  . New airspace distance calculation algorithms
  . New TMZ airspace class for handling TMZ zones separated from OTHER zones

  . NOFLY/FLY airspaces introduced.
    . NOFLY zones - works like the old airspaces. You are in a wrong position when you are inside a nofly zone.
      Warning events based on this, so if you try to enter a nofly zone you get warnings to not do that.
    . FLY zones - Zones you should be in to be safe. You are in a good position when you are inside a fly zone.
      Warning event based on to remain in a fly zone, so if you try to leave it you get warnings to not do that.
      Flying to an adjacent fly zone is permitted, in that case no warnings issued. (For ex. corridors beetween
      different fly zones)
      In the openair file the AF sentence defines a zone as fly, or you can change it from the UI.

  . Current / predicted position
    Predicted position of the aircraft calculated by lk. This calculation based on current mode (circling/cruise),
    ground and vertical speed, and the configured warning time. This is the time before an airspace warning event
    is estimated at which the system will warn the pilot. Warning messages based on predicted and current position
    as well.

  . Warning levels, warning messages
    . Yellow warning:
      Your current position near a warning situation. This means that you have a possibility to be in a wrong position
      in the given warning time. (30sec by default). There are two types of yellow situation:
      Predicted warning situation - your predicted posititon in a wrong zone (same as old airspaces case)
      Near to a warning situation - You too close horizontally or vertically to a warning position.
      (Too close comes from actual speed and nearest warning point distance and from the configured warning time)
    . Red warning:
      Your current position is wrong, you shouldn't be there because that position violates airspace rules.
      (For example you enter a nofly zone, or you leave a fly zone)
    . New airspace warning dialog
      . Shows the reason of the message, warning level, name of airspace, horizontal and vertical distance, airspace
        base and top altitude
      . Dialog auto closes after a configured time automatically, or you can close it
      . There is a possibility to acknowledge the given warning level for a configured time to not show up again.
      . The old one still accessible under Info1/Analysis/Airspace/Warnings button
    . Acknowledging
      . Each airspace has a warning level and a corresponding ack level. 
      . Actual warning level calculated by LK based on distances, fly/nofly zones, etc.
      . Ack level set by the user, by acknowledging warning messages.
      . The warning message appears only if the warning level increases above the ack level. Lets see a few examples:
          1.You are circling in a position where a no warning/yellow warning situation flipping. When a yellow warning
            situation occurs a warning dialog appears. If you do not press the ack button then in every circle the new
            warning dlg will appear beacuse warning level > ack level. But if you ack the yellow warning then the dialog
            not shows up again in the yellow warning case for a configured time. If the ack time (120s) expires, then the
            ack level goes back to zero, so the warning will appear again.
          2.The same case if you are circling at a nofly zone border. Half circle inside the zone. This is a yellow/red
            warning flipping. If you ack the red warning for a time, then you won't get a new warning message on every circle.
      . Daily acknowledging - enable/disable an airspace
        There is a possibility to disable an airspace (until lk restart). You can do that from airspace
        details dialog (long click on map), pressing the Disable button. Disabling an airspace means that warning
        dialog will never appear for that airspace, and it is not shown on the map as well.
    . Warning dialog messages can be:
      . "Predicted leaving FLY zone" : Current position inside, predicted position outside a flyzone (YELLOW)
      . "Near leaving FLY zone" : Current position inside a flyzone, but you are too close to the border to leave it (YELLOW)
      . "Leaving FLY zone" : You have just leaved the fly zone (RED)
      . "Predicted entering NOFLY zone" : Current position outside, predicted position inside a nofly zone (YELLOW)
      . "Near entering NOFLY zone" : Current position outside a flyzone, but you are too close to the border to enter it (YELLOW)
      . "Entering NOFLY zone" : You have just entered the nofly zone (RED)
    . New airspace info messages
      . When leaving a nonfly zone
      . When entering a (new)fly zone

  . New UI features
    . Long click on the map shows an extended airspace details dialog. 
      . In the type field FLY/NOFLY displayed
      . There is a new button to set an airspace to FLY/NOFLY.
      . Daily Ack changed to Enable/Disable
      . Enable/Disable and Fly/Nofly buttons do not close the dialog automatically, and do not pop up a confirmation dialog 
      . The order of the airspaces sorted by top altitude. Lowest first.
    . Airspace warning labels on map
      . Can be disabled from config page2/Warnings
      . Shows a red mark on the nearest posititon to a warning situation
      . Shows airspace name, and the vertical distance to the border
      . Vertical distance negative if airspace border above, positive if below your current altitude. (like in landables case)
      . Label color means:
        - Black - vertical distance ok, you are in good position vertically
        - Red - vertical distance wrong against that nofly zone
        - Orange - vartical distance wrong against that fly zone

    . New infobox showing nearest vertical distance to an airspace (or to leave a fly zone)
    . New infobox showing nearest horizontal distance to an airspace (or to leave a fly zone)


CHANGES

. Polars are now files inside _Polars folder, and can be viewed and edited.
. Extended polars are possible for use of FLAPS settings indicator. See Example.plr  file in _Polars.

. Device configuration has type "DISABLED", no more confusion.

. Changes regarding airspaces:
  . Drawing order of airspaces changed. They are draw from lowest top altitude first.
  . Daily acked (now disabled) airspaces are not drawed on the map
  . Infobox nearest airspace shows the horizontal distance to the nearest airspace (or to leave a fly zone)
  . In airspace details dialog (long click on map) ACKDay button behaviour changed, now it shows a simple question to toggle actual ackday setting.
  . Airspace ACK Day functionality changed to disabled/enabled
  . Enable/Disable and Fly/Nofly buttons do not close the dialog automatically, and do not pop up a confirmation dialog 
  . Config page 2 reordered, some parameters moved under page accessible by pressing the "Warnings" button

. Paragliders screen unlock is valid by doubleclicking only on lower right screen corner.
    Previously any position was good, leading to possible false unlocks during takeoffs.


BUG FIX

. Fix bug in 4.1 traffic page: using this page for a long time may lead to system locks. This is a critical fix.

. Fix AutoQNH problem. Takeoff wp was used in place of Home first!
    Correct mode now is: look for home, if no home nearby, look for another known waypoint near 2km.
    Do not consider TAKEOFF as a valid waypoint for QNH because it is itself assigned an altitude!
    If no waypoints nearby, and no home, use terrain altitude if available.

. Fix a possible problem of UTF8 characters on very old devices, that may show as funny tokens appearing in place of text.
  This was due to missing UTF8 support on some old operating system like Windows CE 3.0. The patch has been tested on
  CE 3.0 Ipaq 3630.

. Fix cheap chinese PNA bugs, when system messages appear lk is crashing with exception 0xC000001C


